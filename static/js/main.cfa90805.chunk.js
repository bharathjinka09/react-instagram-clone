(this["webpackJsonpinstagram-clone"]=this["webpackJsonpinstagram-clone"]||[]).push([[0],{63:function(e,a,t){e.exports=t(88)},68:function(e,a,t){},69:function(e,a,t){},70:function(e,a,t){},84:function(e,a,t){},88:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(9),o=t.n(c),l=(t(68),t(13)),s=(t(69),t(70),t(21)),i=t.n(s),m=i.a.initializeApp({apiKey:"AIzaSyC2VBRWmYSmItq-CLRYnvSakufUsOMVdNc",authDomain:"instagram-clone-ee5c2.firebaseapp.com",databaseURL:"https://instagram-clone-ee5c2.firebaseio.com",projectId:"instagram-clone-ee5c2",storageBucket:"instagram-clone-ee5c2.appspot.com",messagingSenderId:"510957695911",appId:"1:510957695911:web:d6d2ae2264471f1a0d3c82",measurementId:"G-F7BGQS38K0"}).firestore(),u=i.a.auth(),p=i.a.storage(),d=t(126);var g=function(e){var a=e.postId,t=e.user,c=e.username,o=e.caption,s=e.imageUrl,u=Object(n.useState)([]),p=Object(l.a)(u,2),g=p[0],f=p[1],E=Object(n.useState)([]),b=Object(l.a)(E,2),v=b[0],h=b[1];return Object(n.useEffect)((function(){var e;return a&&(e=m.collection("posts").doc(a).collection("comments").orderBy("timestamp","desc").onSnapshot((function(e){f(e.docs.map((function(e){return e.data()})))}))),function(){e()}}),[a]),r.a.createElement("div",{className:"post center"},r.a.createElement("div",{className:"post__header"},r.a.createElement(d.a,{className:"post__avatar",alt:"Avatar",src:s}),r.a.createElement("h3",null,c)),r.a.createElement("img",{className:"post__image",src:s,alt:"postImage"}),r.a.createElement("h4",{className:"post__text"},r.a.createElement("strong",null,c)," ",o),r.a.createElement("div",{className:"post__comments"},g.map((function(e){return r.a.createElement("p",null,r.a.createElement("strong",null,e.username)," ",e.text)}))),t&&r.a.createElement("form",{className:"post__commentBox"},r.a.createElement("input",{className:"post__input",type:"text",placeholder:"Add a comment...",value:v,onChange:function(e){return h(e.target.value)}}),r.a.createElement("button",{className:"post__button",disabled:!v,type:"submit",onClick:function(e){e.preventDefault(),m.collection("posts").doc(a).collection("comments").add({text:v,username:t.displayName,timestamp:i.a.firestore.FieldValue.serverTimestamp()}),h("")}},"Comment")))},f=t(124),E=(t(84),t(123));var b=function(e){var a=e.username,t=Object(n.useState)(null),c=Object(l.a)(t,2),o=c[0],s=c[1],u=Object(n.useState)(0),d=Object(l.a)(u,2),g=d[0],b=d[1],v=Object(n.useState)(""),h=Object(l.a)(v,2),_=h[0],y=h[1];return r.a.createElement("div",{className:"imageupload"},r.a.createElement("progress",{className:"imageupload__progress",value:g,max:"100"}),r.a.createElement("br",null),r.a.createElement(E.a,{type:"text",placeholder:"Enter a caption....",onChange:function(e){return y(e.target.value)},value:_}),r.a.createElement("br",null),r.a.createElement("input",{type:"file",onChange:function(e){e.target.files[0]&&s(e.target.files[0])}}),r.a.createElement("br",null),r.a.createElement(f.a,{style:{margin:"1rem"},size:"small",variant:"contained",color:"primary",onClick:function(){p.ref("images/".concat(o.name)).put(o).on("state_changed",(function(e){var a=Math.round(e.bytesTransferred/e.totalBytes*100);b(a)}),(function(e){console.log(e),alert(e.message)}),(function(){p.ref("images").child(o.name).getDownloadURL().then((function(e){m.collection("posts").add({timestamp:i.a.firestore.FieldValue.serverTimestamp(),caption:_,imageUrl:e,username:a}),b(0),y(""),s(null)}))}))}},"Upload"))},v=t(122),h=t(125),_=t(121);t(85);function y(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var O=Object(v.a)((function(e){return{paper:{position:"absolute",width:"50%",backgroundColor:e.palette.background.paper,border:"2px solid black",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));var j=function(){var e=O(),a=Object(n.useState)(y),t=Object(l.a)(a,1)[0],c=Object(n.useState)([]),o=Object(l.a)(c,2),s=o[0],i=o[1],p=Object(n.useState)(!1),d=Object(l.a)(p,2),E=d[0],v=d[1],j=Object(n.useState)(!1),w=Object(l.a)(j,2),N=w[0],S=w[1],C=Object(n.useState)(""),I=Object(l.a)(C,2),k=I[0],x=I[1],U=Object(n.useState)(""),B=Object(l.a)(U,2),A=B[0],z=B[1],P=Object(n.useState)(""),D=Object(l.a)(P,2),W=D[0],L=D[1],R=Object(n.useState)(null),V=Object(l.a)(R,2),F=V[0],M=V[1];return Object(n.useEffect)((function(){var e=u.onAuthStateChanged((function(e){e?(console.log(e),M(e)):M(null)}));return function(){e()}}),[F,k]),Object(n.useEffect)((function(){m.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){i(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),r.a.createElement("div",{className:"app"},r.a.createElement(h.a,{open:E,onClose:function(){return v(!1)}},r.a.createElement("div",{style:t,className:e.paper},r.a.createElement("center",null,r.a.createElement("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:"Instagram"})),r.a.createElement("form",{className:"app__signup"},r.a.createElement(_.a,{placeholder:"Username",type:"text",value:k,onChange:function(e){return x(e.target.value)}}),r.a.createElement(_.a,{placeholder:"Email",type:"email",value:W,onChange:function(e){return L(e.target.value)}}),r.a.createElement(_.a,{placeholder:"Password",type:"password",value:A,onChange:function(e){return z(e.target.value)}}),r.a.createElement("br",null),r.a.createElement(f.a,{variant:"contained",color:"primary",type:"submit",onClick:function(e){e.preventDefault(),u.createUserWithEmailAndPassword(W,A).then((function(e){return e.user.updateProfile({displayName:k})})).catch((function(e){return alert(e.message)})),v(!1)}},"Sign Up")))),r.a.createElement(h.a,{open:N,onClose:function(){return S(!1)}},r.a.createElement("div",{style:t,className:e.paper},r.a.createElement("center",null,r.a.createElement("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:"Instagram"})),r.a.createElement("form",{className:"app__signin"},r.a.createElement(_.a,{placeholder:"Email",type:"email",value:W,onChange:function(e){return L(e.target.value)}}),r.a.createElement(_.a,{placeholder:"Password",type:"password",value:A,onChange:function(e){return z(e.target.value)}}),r.a.createElement("br",null),r.a.createElement(f.a,{variant:"contained",color:"primary",type:"submit",onClick:function(e){e.preventDefault(),u.signInWithEmailAndPassword(W,A).catch((function(e){return alert(e.message)})),S(!1)}},"Sign In")))),r.a.createElement("div",{className:"app__header"},r.a.createElement("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:"logo"}),F?r.a.createElement(f.a,{size:"small",variant:"contained",color:"secondary",onClick:function(){return u.signOut()}},"Logout"):r.a.createElement("div",{className:"app__loginContainer"},r.a.createElement(f.a,{style:{margin:"3px"},size:"small",variant:"contained",color:"primary",onClick:function(){return S(!0)}},"Sign In"),r.a.createElement(f.a,{style:{margin:"3px"},size:"small",variant:"contained",onClick:function(){return v(!0)}},"Sign Up"))),r.a.createElement("div",{className:"app__posts"},s.map((function(e){var a=e.id,t=e.post;return r.a.createElement(g,{key:a,postId:a,user:F,username:t.username,caption:t.caption,imageUrl:t.imageUrl})}))),(null===F||void 0===F?void 0:F.displayName)?r.a.createElement(b,{username:F.displayName}):r.a.createElement("h3",{style:{textAlign:"center",padding:"2%"}},"Please login to upload!"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[63,1,2]]]);
//# sourceMappingURL=main.cfa90805.chunk.js.map